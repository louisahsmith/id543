{
  "hash": "12fab0326283ca488b6cbd499af77af9",
  "result": {
    "markdown": "---\ntitle: \"Introduction to ggplot\"\nformat: \n  revealjs:\n    theme: \n      - ../../www/custom.scss\norder: 2\n---\n\n\n## #goals\n\n::: {style=\"height: 0px;\"}\n\n::: {.cell}\n<style type=\"text/css\">\ndiv.callout-caution{border-left-color:#5e81ac !important}div.callout-caution.callout-style-default .callout-caption{background-color:#5e81ac !important}div.callout-caution.callout-style-default .callout-title{background-color:rgba(94,129,172,0.501961) !important}div.callout-note{border-left-color:#b48ead !important}div.callout-note.callout-style-default .callout-caption{background-color:#b48ead !important}div.callout-note.callout-style-default .callout-title{background-color:rgba(180,142,173,0.501961) !important}div.callout-important{border-left-color:#d08770 !important}div.callout-important.callout-style-default .callout-caption{background-color:#d08770 !important}div.callout-important.callout-style-default .callout-title{background-color:rgba(208,135,112,0.501961) !important}div.callout-warning{border-left-color:#ebcb8b !important}div.callout-warning.callout-style-default .callout-caption{background-color:#ebcb8b !important}div.callout-warning.callout-style-default .callout-title{background-color:rgba(235,203,139,0.501961) !important}div.callout-tip{border-left-color:#a3be8c !important}div.callout-tip.callout-style-default .callout-caption{background-color:#a3be8c !important}div.callout-tip.callout-style-default .callout-title{background-color:rgba(163,190,140,0.501961) !important}.callout-icon-container>p{color:#a1b6cf !important}div.callout-caution .callout-icon::before{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2388c0d0' viewbox='0 0 16 16'%3E%3Cpath d='m8,0C3.58,0,0,3.58,0,8s3.58,8,8,8,8-3.58,8-8S12.42,0,8,0Zm0,1.02c3.85,0,6.98,3.12,6.98,6.98s-3.12,6.98-6.98,6.98S1.02,11.85,1.02,8,4.15,1.02,8,1.02Zm.12,1.7c-.44,0-.85.06-1.22.16-.38.11-.73.28-1.03.5-.26.19-.51.43-.7.68-.33.44-.52.93-.56,1.5,0,.04,0,.07,0,.07,0,0,1.74.22,1.74.22,0,0,0-.02.02-.08.16-.65.44-1.08.88-1.34.35-.21.78-.29,1.26-.24.22.02.42.08.59.16.22.1.41.27.56.46.12.17.2.37.22.58,0,.06,0,.2,0,.26-.02.15-.06.27-.12.4-.06.13-.12.2-.22.3-.16.17-.41.39-.86.75-.29.24-.48.41-.65.59-.4.41-.58.73-.68,1.18-.07.3-.1.6-.09,1.06,0,.11,0,.22,0,.24v.03h1.73v-.19c0-.26.02-.43.05-.59.05-.26.11-.4.32-.62.13-.14.3-.3.55-.52.38-.32.65-.56.9-.81.39-.39.6-.66.74-.98.11-.25.18-.49.2-.76,0-.07,0-.24,0-.32-.04-.56-.25-1.06-.65-1.52-.06-.07-.22-.23-.3-.3-.4-.35-.86-.59-1.4-.73-.34-.08-.66-.13-1.07-.14-.06,0-.13,0-.19,0h0Zm-.87,8.29v1.76h1.76v-1.76h-1.76Z'%3E%3C/path%3E%3C/svg%3E\") !important}div.callout-tip .callout-icon::before{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAp1JREFUWEftls1rE0EUwN9mu0ZR/IDsNilaQUQPiv4BglhpbRPRgpTeBvI32HTjMadKuqn4JyzMsXhQaddYURQ8eFT0IOLBz3SbVpQqNo2bSkZ32WxmZme3uQjmtGTex2/ee/PekyDKb6m4D8vqV54Kan4ehNEbH0TNSkKCd6dSeHemLiT7V0gUhA+wBRJ+VGnRHKNm/QzIidfkzGkdx4r6NCiXb6yMO9nZOzxwNgDFOXLqh2Gk/J4biaXiIJbVd34ZdL7A9MM8wA8rW6JGaECi+nSA+/oA7tM+uYZ5N+BFww+BNuyjkDPeBuWpAB2KnPCJFGWYrW6A6tVDWBkgeUatL2kYnrFFHDFlqgUNK2liA/2yj8EF441ftgsgjDgODM8mEyDfrOWc0TkrjsOgjlydyppKZpFEIZBSJgBy6vthpPytFwDg66Bo9VkfTM47rl02wDaLLwjupgG11lIwfH2NDuBrPnGfHitiHoD08QAM3fTmCTsCP2oqXJpb7UkKfLMEDRUSIIHX5NhFuGlPOGPGrV4AyJZ+xUxqxJZwEdKE48JEeobw4NoRnEiRlokay6chW3kR1zHRswqncDL9/E9j6yzA9n/hrfjJdxlKJepIDgUrlRL47B7vydEKmz6MfO1zO6noCP36yl4Yn10XGkZtIdmazpnJ/oX2d75hTzpZYz70xj4BuapPmIpGdNCGfQ5yxmOaPncj6rhBlF1vUT+Id2reXhhrISG0ga1ItDlFGWjhS+m94gm8Q31JQikyH/x9f7N+EsbKr3ipCwcAgCg3iiLLfIZd49TSL5tJ7XaUIhTZiIUBIPCeRUCQYP8QSkHbYXDLDYMQLdj/AP9OBKLUgWj+xV+BW3EL02m8q7/GK0D0087ARWM5rEjd89/mEzIwY1V62wAAAABJRU5ErkJggg==\") !important}div.callout-warning .callout-icon::before{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA4dJREFUWEfFVmtP01AYXmGbEJB1iEhwF4aIMYZoiKKBrWIiGIUyKGMJxpgYEow/gO985w+IGj+YeGM36DZNIFG2ghc03mJilOgYVQMBWYdiZB3MnINbumVd2xHkfOnJOe/leZ7z9j0HkW3zQLY5vyxrACFHGxbVmXyAgJz2N6oJN5xLHVkBCDlbD0e1J99wk8mDVK3aQr7ecgCxmAxZfDmwni5RydG+HASRxaSAkKxA2I53R/TYHZAkNzCFgu+aoY4BXyVNXVAR5O0tAzB3q7kg92DTL3juQapHbSFvgnnIab4U1RrhPBaY2llqtUEbMUOSAgsvBhLylnhXcpH+fngUsf7+nMWWgrV4wt3H+kTHFW0YHmqrihhM01Dq4MQJlWXkOZdh2NVeF9E0wDVl0FetsnigrdAQDYDLno+hGJtUQKIAhF342YgGewCc879TZYVmcj5sNx+P6I3PuIr8dHaU/tHWz8O1WapV1Ul6N61AbKhLuWioW009Xy5bsBdXJalOFh7lIeceJnzTgRFUICngq2klcvkaCwLxAYgN9ioWa/dHxBZkRgALI23lsnLTNxBMQVPNKEGOxQPzAQD7jMN8mtUZoS0S8GlKrB4YQ7ICmYoqE4BUhTL9lrwKLNvM9asVxknIPuCvRK3uAJeBEICQq70iqmmAPrm0z1RMeCZEKyCmsXBbsjLoP6+yuO+mJkiqn8CUHLHaEs0qbptWAcaB97I6bBAYsXP+gnLc/Ts1eMjW3hitaHgM1uUzk6fUXcPjqTb0UFd+nqEO+ipo6gpKkFcF+wDjaVGzexqX/jlZUYK0pZNu2dlRvaqt/wj2dtBPDhQRrk/p7Bg73snqMTvYUwamdqmsNhibVwGx3Yx7LQtdw5liJh3B0rC5Zm2v8d1G4YzXFBPe93y/j5T1H3b80Loeg7HktO+ImvC8TauAWPZSksdtkwqS83BJKMDYcSurx+7Ds58fL0ZbvaFMiRhnWxOrNY1C+xn/GbTLDed8I+RqR6OaBhhTSVPdKoK8B+YQAPehoQhSvaiFvC7EUqgPpC1IB97D6rAbYG/tw1hh2cXRFQiA76GRCUQ2ANL1F4RxtFSyusbPG7+Tr76I8DwVYg/2pR5BPCb3Gld8naxCtrLw+IhwcyYAKGbH96Gd3i9i2G/WhntPJCmw2cDZ+CPMEG5gDdh/YZ4KEKgu+CLKhpUUn20H8BfRiJwMGfDNGwAAAABJRU5ErkJggg==\") !important}div.callout-important .callout-icon::before{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqtJREFUWEdjZCAS3A4NFf3z/7f2XavY/fi0KB9b7Mj6l/Gayvr1r4gxmpGQomtBQfL3bKIfEFKHTV7pyFIFrXXrHuLTi9MBj0NDOS9aRnzDpVn56CIP9t//L3xn/8PI9I9V/6513A5cavWPr+CSXb36OzZ5rA64Geyrcds64TqyBvVDi1VUN2y4S0xI3A4IUL5pF3sHWa3q0QWa6ms330DXj+GA28F+hjet48/BFCofX2KluXr9cWIsRldzPTTQ8q5lzDGYuPrRhUaqazedR1aH4oAbfn5Sdxzin8IUGO1fwC21eTPOaCDGUc98fbnOOSZ8halVObBQWmPTpmcwPtwB/0NDmbdaRvyBSUjc2MlmMmvWb2IsIaTmTFoa6wsN918wdd7HV7Awrl79F8SHO2BL39r/MAWqpxeIqi/f/IaQwaTI34z0FbltmvAapsenKBhsN5i44+8ve8M+7hGIrXZkkavauo17CBl+K9jf/JZ13AmwnqOLLNTWbjxJUE+Qv8stm7jdIHUaBxfJqWzc+BjsAGTfw1xGyDBkPSC15OgD6WG8HhgofNc2BhzcyoeXqGuuX3+LkOXojibFAdcDA9Xu2sbchNonwkiO7ylxALreweMA9aMLdFTXbr5KTPBTGgK3g321b1onXAHnAlgU4CuvsTmK3EQIMgu5noE7gNhUDHPM9ZAAB1jVDKqCNddsOEBs6CGHIPkOQE3NROcemCNhIUh2FPxnYGDc2rf2H8hA76JgJkYGBnhJSigksEYBqYmQkCX45LEmQlIKE0osp1o5cCvQz/WWbfwukIHqxxa7q67ZAGYTA5Bz0MAXxQNeGYEcQFZ1TEYU3MJVHaOHAt0bJCAHDHiTDOSIAW2UwrLPgDbLYY4Y0I4JzBED2jVDLs0GrHOKXqTSqnsOAJxF1JQ5aCVbAAAAAElFTkSuQmCC\") !important}div.callout-note .callout-icon::before{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEdjZCASeLY9F/39l0U7TX3/fnxaZt10dGT6+/fargaJV8QYzUhIkVPLe/kMtd0PCKnDJj/jlqvCvhrBh/j04nSAZd9jzkKZ499waZ513dnjP8ufC39/MzKyMDLrp2nu3YFLbf8TS67jRbLfscljdYBbwxuNFK1915E1zLhpr7KvVvwuMSHh1PxSOUP94B1ktXOuOWnuahC5ga4fwwEuTa8M0zQOnIMpnHnD2WpvnfBxYixGV+Pc9NYyXWPvMZj4rBsORnvqxM4jq0NxgGvDa6lUrf1PYQoWX7Ph3twghTMaiHGUb8MzrlitI19hamdfc5Te3SD6DMaHOyB01X/mUIbVf2ASne9D2c6mM/4mxhJCaoxn/mctF1z9C6ZuNUMoy+owxr8gPtwBq1at+g9TMO2ah+iBBr43+Ax2a3zrmqK5dxdIzZzrzm676oV341Pv0PBJJEtrx2uYmrCwMLDdYMKt5a1sitreRyD2zJtOrntrRfYQ8hWyg0FqYQbi0+fc/MYlXX0f2KFzbjnL7aoRfgx2ALJhxBiErodYB2Czi9G57ZNwusoOcHDPvOaovrdB9BYh34NDjcQogJnp3PBaLV1r/02wfXc8RBjJ8T0xDsSnBtnOweOAuTecdXbWCV8lxncuLW8t0tT2ohROxKYdkPnuTW+1kzX2XgHnAlhw4Cuv0R2FngNISYQgtcj1DNwBpPiAklwA8wzME1RxwLybjho7akXBKZtYgOEAUqIAIz+HhjIxMDLCS1JCjsAaBaQkQvQKhtTow5oISUlILi3vbNLU9hyG+ZRUB1BcDiAbMOe6o9+uetHNhIIdWR7FAeQUxcgGzLxtL7G3WvwlsQ7AKIrJqYwoKb7R9ZJVHZNbEOGsjtFDgVCDBN0B8685y25vEH6CLxrwNkhAGklqkv3/z+jU+kGOhf3nm12lEvD2Hi4HENUkA2ke0EYpzPUD2iyHOWJAOyYwRwxo1ww5MQ1Y5xQ9RdOqew4AmQrjruDNt+sAAAAASUVORK5CYII=\") !important}.reveal .smaller .callout.callout-titled .callout-icon::before{margin-top:0.5rem !important}\n</style>\n:::\n\n\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/goals-plot-1-1.png){width=960}\n:::\n:::\n\n\n## #goals\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/goals-plot-2-1.png){width=960}\n:::\n:::\n\n\n## Why ggplot?\n\n- Powerful and flexible: create complex and customized visualizations easily\n- Reproducibility and efficiency: promotes reproducibility by offering consistent syntax and saves time through automation of plot creation\n- Layered approach: incrementally build visualizations with multiple layers, exploring different aspects of data\n- Extensive customization: essentially infinite options to tailor visualizations\n\n## ggplot builds figures by adding on pieces via a particular \"*g*rammar of *g*raphics\"\n\n::: center\n![](../../img/grammar.png)\n:::\n\n## Basic structure of a ggplot\n\n```         \nggplot(data = {data}, aes(x = {xvar}, y = {yvar}, <characteristic> = {othvar}, ...)) +\n      <geom>(<characteristic> = \"value\", ...) + \n      ...\n```\n::: smaller\n-   `{data}`: must be a dataframe (or tibble!)\n-   `{xvar}` and `{yvar}` are the names (unquoted) of the variables on the x- and y-axes\n    - some graphs may not require both, or may require other parameters\n-   `{othvar}` is some other unquoted variable name that defines a grouping or other characteristic you want to map to an aesthetic\n-   `<characteristic>`: you can map `{othvar}` (or a fixed `\"value\"`) to any of a number of aesthetic features of the figure; e.g., color, shape, size, linetype, etc.\n-   `<geom>`: the geometric feature you want to use; e.g., point (scatterplot), line, histogram, bar, etc.\n-   `\"value\"`: a fixed value that defines some characteristic of the figure; e.g., \"red\", 10, \"dashed\"\n-   ... : there are numerous other options to discover!\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"true\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-2-1.png){width=576}\n:::\n:::\n\n\n- `ggplot()` doesn't plot any data itself, it just sets up the data and variables\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-3-1.png){width=576}\n:::\n:::\n\n\n- `geom_bar()` creates a bar graph for the number of observations with a certain value of the `x` variable\n  - does not need a `y` variable\n  \n::: {.callout-tip}\nuse `geom_col()` if you have a `y` variable that you want to use as the height of the bars\n:::\n\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-4-1.png){width=576}\n:::\n:::\n\n\n- `facet_grid()` creates a panel for each value of another variable\n  - can also do `rows = `\n  - variable name should be within `vars()` (for reasons we'll get to later!)\n\n::: {.callout-tip}\nuse `facet_wrap()` if you want to create panels that expand along rows and columns (e.g., to facet by many countries)\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"5-6\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-5-1.png){width=576}\n:::\n:::\n\n\n- `scale_{fill/color}_{...}()` functions change the color palette\n  - some are appropriate for continuous variables, others discrete\n  \n::: {.callout-tip}\n`scale_fill_viridis_d()` good color-blind and black & white-friendly options\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"7-9\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1) +\n  scale_x_discrete(breaks = c(\"Excellent\", \n                              \"Good\", \"Poor\"),\n                   name = \"Eyesight quality\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-6-1.png){width=576}\n:::\n:::\n\n\n- `scale_{x/y}_{...}()` functions change the axis scale and/or labeling\n\n::: {.callout-tip}\n`scale_y_log10()` is helpful when plotting odds or risk ratios\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1) +\n  scale_x_discrete(breaks = c(\"Excellent\", \n                              \"Good\", \"Poor\"),\n                   name = \"Eyesight quality\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-7-1.png){width=576}\n:::\n:::\n\n\n- `theme_{...}()` changes the \"look\" of the plot\n  - but not the data color palette\n\n::: {.callout-tip}\nfind lots of themes and color palettes at <https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/>\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"11-13\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1) +\n  scale_x_discrete(breaks = c(\"Excellent\", \n                              \"Good\", \"Poor\"),\n                   name = \"Eyesight quality\") +\n  theme_minimal() +\n  theme(legend.position = \"none\",\n        axis.text.x = element_text(\n          angle = 45, vjust = 1, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\n- you can also specify any component of the theme directly\n\n::: {.callout-tip}\nlots of arguments can be set to `element_blank()` to get rid of them\n:::\n\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"14-15\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1) +\n  scale_x_discrete(breaks = c(\"Excellent\", \n                              \"Good\", \"Poor\"),\n                   name = \"Eyesight quality\") +\n  theme_minimal() +\n  theme(legend.position = \"none\",\n        axis.text.x = element_text(\n          angle = 45, vjust = 1, hjust = 1)) +\n  labs(title = \"Eyesight in NLSY\",\n       y = NULL)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-9-1.png){width=576}\n:::\n:::\n\n\n- `labs()` can add subtitles, caption, alt text, as well as label any aesthetics (fill, color, etc.)\n\n::: {.callout-tip}\nthere's a lot of redundancy... we could have specified `x = \"Eyesight quality\"` here instead.\n:::\n\n## {.smaller}\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code  code-line-numbers=\"16\"}\nggplot(data = nlsy, aes(x = eyesight_cat, \n                        fill = eyesight_cat)) +\n  geom_bar() +\n  facet_grid(cols = vars(glasses_cat)) +\n  scale_fill_brewer(palette = \"Spectral\",\n                    direction = -1) +\n  scale_x_discrete(breaks = c(\"Excellent\", \n                              \"Good\", \"Poor\"),\n                   name = \"Eyesight quality\") +\n  theme_minimal() +\n  theme(legend.position = \"none\",\n        axis.text.x = element_text(\n          angle = 45, vjust = 1, hjust = 1)) +\n  labs(title = \"Eyesight in NLSY\",\n       y = NULL) +\n  coord_cartesian(expand = FALSE)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-10-1.png){width=576}\n:::\n:::\n\n\n- `coord_{...}()` functions change the coordinate system\n  - cartesian is already the default, but `expand = FALSE` means there is no extra space beyond the axis limits\n\n::: {.callout-tip}\n`coord_fixed(ratio = 1)` will ensure that 1 unit on the x-axis is the same length as one unit on the y-axis\n:::\n\n## Can you recognize some of the layers we may need for this one?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n\n## Returning to our basic structure\n\n```         \nggplot(data = {data}, aes(x = {xvar}, y = {yvar}, <characteristic> = {othvar}, ...)) +\n      <geom>(<characteristic> = \"value\", ...) + \n      ...\n```\n\nLet's walk through some more examples in depth\n\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-12-1.png){width=480}\n:::\n:::\n\n:::\n\nWhat if we want to change the color of the points?\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir)) +\n  geom_point(color = \"blue\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-13-1.png){width=480}\n:::\n:::\n\n:::\n\nWhen we put `color =` *outside* the `aes()`, it means we're giving it a specific color value that applies to all the points.\n\n::: callout-warning\nThis is the `<characteristic> = \"value\"` structure and a common confusion!\n:::\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir)) +\n  geom_point(color = \"#3d93c8\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-14-1.png){width=480}\n:::\n:::\n\n:::\n\nSometimes we do want to change all of the colors, though! We can also use hex codes.\n\n::: callout-tip\nOne of my favorite color resources: <https://www.color-hex.com>\n:::\n\n##\n\n:::smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = eyesight)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-15-1.png){width=480}\n:::\n:::\n\n:::\n\nWhen we put `color =` *inside* the `aes()` -- with no quotation marks -- it means we're telling it how it should assign colors.\n\nHere we're plotting the values according to eyesight, where 1 is excellent and 5 is poor.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir)) +\n  geom_point(aes(color = eyesight))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-16-1.png){width=480}\n:::\n:::\n\n:::\n\nNote that we could also put the `aes()` (aesthetics) in the `geom_()` itself.\n\nIf within `geom_point()`, it will only apply to that geom.\n\n:::callout-note\nHere it doesn't matter because we only have one geom\n:::\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir)) +\n  geom_point(aes(color = eyesight)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-17-1.png){width=480}\n:::\n:::\n\n:::\n\nIf we add, say, `geom_line()`, it will not be colored by eyesight\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = eyesight)) +\n  geom_point() +\n  scale_color_gradient(low = \"green\",\n                       high = \"purple\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-18-1.png){width=480}\n:::\n:::\n\n:::\n\nThe blues are hard to distinguish, so we could map the values of `eyesight` to a different continuous scale using `scale_color_gradient()`\n\nYou can read lots more about this function [here](https://ggplot2.tidyverse.org/reference/scale_gradient.html), so you don't have to have such ugly color scales!\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = factor(eyesight))) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-19-1.png){width=480}\n:::\n:::\n\n:::\n\nBut wait! The variable `eyesight` isn't really continuous: it has 5 discrete values.\n\nWe want to treat it as a *factor* (categorical) variable using the `factor()` function\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = factor(eyesight))) +\n  geom_point() +\n  scale_color_manual(\n    values = c(\"blue\", \"purple\", \"red\",\n               \"green\", \"yellow\"))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-20-1.png){width=480}\n:::\n:::\n\n:::\n\nNow if we want to change the color scheme, we have to use a different function.\n\nBefore we used `scale_color_gradient()`, which works for continuous variables, now `scale_color_manual()`.\n\nThere are a lot of options that follow the same naming scheme.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = factor(eyesight))) +\n  geom_point()  +\n  scale_color_brewer(palette = \"Set1\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-21-1.png){width=480}\n:::\n:::\n\n:::\n\nThere are tons of different options in R for color palettes.\n\nYou can play around with those in the `RColorBrewer` package [here](http://colorbrewer2.org).\n\nYou can access the scales in that package with `scale_color_brewer()`, or see them all after installing the package with `RColorBrewer::display.brewer.all()`\n\n\n\n##\n\n:::smaller\n\n::: {.cell output-location='column' fig.asp='0.8'}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, y = age_bir, \n           color = factor(eyesight))) +\n  geom_point()  +\n  scale_color_brewer(palette = \"Set1\", \n            name = \"Eyesight\",\n            labels = c(\"Excellent\",\n                       \"Very Good\",\n                       \"Good\",\n                       \"Fair\",\n                       \"Poor\"))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-22-1.png){width=480}\n:::\n:::\n\n:::\n\nEach of the `scale_color_x()` functions has a lot of the same arguments.\n\n::: callout-warning\nMake sure if you are labeling a factor variable in a plot like this that you get the names right!\n:::\n\n## Exercise\n\n1. Make a scatterplot showing the relationship between sleep on weekdays and on weekends. \n2. Play around with changing the colors.\n3. Type `scale_color` into your R console and press tab to see the autocomplete. Look through the options and find one we haven't seen. that works with your plot.\n\n\n## Facets\n\n- One of the most useful features of `{ggplot2}` is the ability to \"facet\" a graph by splitting it up according to the values of some variable\n- You might use this to show results for a lot of outcomes or exposures at once, for example, or see how some relationship differs by something like age or geographic region\n\n::: center\n![scale=80%](../../img/facets.png)\n:::\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-23-1.png){width=480}\n:::\n:::\n\n:::\n\nWe'll introduce bar graphs at the same time!\n\nNotice how we only need an `x =` argument - the y-axis is automatically the count with this geom.\n\n##\n\n:::smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_grid(cols = vars(region))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-24-1.png){width=480}\n:::\n:::\n\n:::\n\nThe `facet_grid()` function splits up the data according to a variable(s).\n\nHere we've split it by region into columns.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_grid(rows = vars(region))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-25-1.png){width=480}\n:::\n:::\n\n:::\n\nSince that was hard to read, we'll probably want to split by rows instead.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_grid(rows = vars(region),\n             margins = TRUE)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-26-1.png){width=480}\n:::\n:::\n\n:::\n\nWe can also add a row for all of the data combined.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_grid(rows = vars(region),\n             margins = TRUE,\n             scales = \"free_y\")\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-27-1.png){width=480}\n:::\n:::\n\n:::\n\nThat squishes the other rows though! We can allow them all to have their own axis limits with the `scales =` argument.\n\nOther options are \"free_x\" if we want to allow the x-axis scale to vary, or just \"free\" to allow for both.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_wrap(vars(region))\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-28-1.png){width=480}\n:::\n:::\n\n:::\n\nWe can use `facet_wrap()` instead, if we want to use both multiple rows and columns for all the values of a variable.\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.9'}\n\n```{.r .cell-code}\nggplot(data = nlsy, aes(x = nsibs)) +\n  geom_bar() +\n  labs(x = \"Number of siblings\") +\n  facet_wrap(vars(region), \n             ncol = 3)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-29-1.png){width=480}\n:::\n:::\n\n:::\n\nIt tries to make a good decision, but you can override how many columns you want!\n\n## Wait, these look like histograms!\n\nWhen we have a variable with a lot of possible values, we may want to bin them with a histogram\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\nWe used discrete values with `geom_bar()`, but with `geom_histogram()` we're combining values: the default is into 30 bins.\n\nThis is one of the most common warning messages I get in R! <br>\n\n::: center\n![](https://www.washingtonpost.com/pbox.php?url=http://www.washingtonpost.com/news/volokh-conspiracy/wp-content/uploads/sites/14/2015/08/Warning-2.gif&w=1484&op=resize&opt=1&filter=antialias&t=20170517)\n:::\n\n##\n\n:::smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\nggplot(nlsy, aes(x = income)) +\n  geom_histogram(bins = 10)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-31-1.png){width=576}\n:::\n:::\n\n:::\n\n\nWe can use `bins =` instead, if we want!\n\n::: callout-note\nNote how this fits into the `<characteristic> = \"value\"` structure\n:::\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\nggplot(nlsy, aes(x = income)) +\n  geom_histogram(bins = 100)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-32-1.png){width=576}\n:::\n:::\n\n:::\n\n::: callout-warning\nBe aware that you may interpret your data differently depending on how you bin it!\n:::\n\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\nggplot(nlsy, aes(x = income)) +\n  geom_histogram(binwidth = 1000)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-33-1.png){width=576}\n:::\n:::\n\n:::\n\nSometimes the bin width actually has some meaning so we want to specify that\n\nHere, each bin is $1000 -- you can see the $5000 and $10000 increments\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\nggplot(nlsy, aes(x = income)) +\n  geom_histogram() +\n  scale_x_log10()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-34-1.png){width=576}\n:::\n:::\n\n:::\n\nThere are a lot of `scale_x_()` and `scale_y_()` functions for you to explore\n\n::: callout-tip\nThe naming schemes work similarly to the `scale_color` ones, just with different options!\n:::\n\n##\n\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\nggplot(nlsy, aes(x = income)) +\n  geom_histogram() +\n  scale_x_log10(labels = scales::dollar)\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-35-1.png){width=576}\n:::\n:::\n\n:::\n\nThe `{scales}` packages contains lots of helpful number formatting functions\n\nSee the `help(scale_x_log10)` for some examples\n\n## Exercise\n\n1. Make a histogram showing the distribution of income in this data. Facet it by the variable(s) of your choice.\n2. Make the bars of the histogram orange.\n3. Make the bars of the histogram differ according to the variable you faceted by\n4. Make the bars of the histogram differ according to a different variable from the one you faceted by.\n\n## Finally, themes to make our plots prettier\n\nYou probably recognize the ggplot theme. But did you know you can trick people into thinking you made your figures in Stata?\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-36-1.png){width=90%}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-37-1.png){width=90%}\n:::\n:::\n\n:::\n:::\n\n##\n::: smaller\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np <- ggplot(nlsy, \n            aes(x = factor(sleep_wknd), \n                y = sleep_wkdy,\n                fill = factor(sleep_wknd))) +\n  geom_boxplot() +\n  scale_fill_discrete(guide = \"none\") +\n  labs(x = \"hours slept on weekends\",\n       y = \"hours slept on weekends\",\n       title = \"The more people sleep on weekends, the more they\\n sleep on weekdays\",\n       subtitle = \"According to NLSY data\")\n\np\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-38-1.png){width=576}\n:::\n:::\n\n\n\nLet's store our plot first.\n\nPlots work just like other R objects, meaning we can use the assignment arrow.\n:::\n\n::: callout-caution\n# Question\nCan you figure out what each chunk of this code is doing to the figure?\n:::\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-39-1.png){width=576}\n:::\n:::\n\n\n\nWe can change the overall theme\n\nSince we stored the plot as `p`, it's easy to add on / try different things\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  theme_dark()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-40-1.png){width=576}\n:::\n:::\n\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-41-1.png){width=576}\n:::\n:::\n\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-42-1.png){width=576}\n:::\n:::\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  ggthemes::theme_fivethirtyeight()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-43-1.png){width=576}\n:::\n:::\n\n\nOther packages contain themes, too.\n\n\n##\n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  ggthemes::theme_excel_new()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-44-1.png){width=576}\n:::\n:::\n\n\nIn case you miss Excel....\n\n## \n\n\n::: {.cell output-location='column' fig.asp='0.7'}\n\n```{.r .cell-code}\np +\n  louisahstuff::my_theme()\n```\n\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-45-1.png){width=576}\n:::\n:::\n\n\n\nYou can even make your own!\n\n## Finally, save it!\n\nIf your data changes, you can easily run the whole script again:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\nlibrary(tidyverse)\ndataset <- read_csv(\"dataset.csv\")\nggplot(dataset) + \n  geom_point(aes(x = xvar, y = yvar))\nggsave(filename = \"scatterplot.pdf\")\n```\n:::\n\n\nThe `ggsave()` function will automatically save the most recent plot in your output.\n\nTo be safe, you can store your plot, e.g., `p <- ggplot(...) + ...` and then\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(filename = \"scatterplot.pdf\", plot = p)\n```\n:::\n\n\n## More resources\n\n:::: columns\n::: {.column width=\"50%\"}\n::: smaller\n- Cheat sheet: <https://www.rstudio.com/resources/cheatsheets/#ggplot2>\n- Catalog: <http://shiny.stat.ubc.ca/r-graph-catalog/>\n- Cookbook: <http://www.cookbook-r.com/Graphs/>\n- Official package reference: <https://ggplot2.tidyverse.org/index.html>\n- List of themes and instructions to make your own: <https://www.datanovia.com/en/blog/ggplot-themes-gallery/>\n:::\n:::\n::: {.column width=\"50%\"}\n![](https://github.com/rstudio/hex-stickers/blob/main/PNG/ggplot2.png?raw=true)\n:::\n:::\n\n## Exercise\n\nSee how close you can get to this plot!\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](intro-ggplot_files/figure-revealjs/unnamed-chunk-48-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "intro-ggplot_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}