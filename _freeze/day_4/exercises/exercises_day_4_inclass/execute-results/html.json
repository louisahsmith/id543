{
  "hash": "e815daefa5db225be8ded1947681d6c8",
  "result": {
    "markdown": "---\ntitle: \"Solutions: Day 4 Exercises\"\n---\n\n\nDownload this document [here](_exercises_day_4_inclass.qmd).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nnlsy_cols <- c(\"glasses\", \"eyesight\", \"sleep_wkdy\", \"sleep_wknd\", \n               \"id\", \"nsibs\", \"samp\", \"race_eth\", \"sex\", \"region\", \n               \"income\", \"res_1980\", \"res_2002\", \"age_bir\")\nnlsy <- read_csv(\"https://raw.githubusercontent.com/louisahsmith/id543/main/data/nlsy.csv\", \n                 na = c(\"-1\", \"-2\", \"-3\", \"-4\", \"-5\", \"-998\"),\n                 skip = 1, col_names = nlsy_cols) |> \n  mutate(region_cat = factor(region, labels = c(\"Northeast\", \"North Central\", \"South\", \"West\")),\n         sex_cat = factor(sex, labels = c(\"Male\", \"Female\")),\n         race_eth_cat = factor(race_eth, labels = c(\"Hispanic\", \"Black\", \"Non-Black, Non-Hispanic\")),\n         eyesight_cat = factor(eyesight, labels = c(\"Excellent\", \"Very good\", \"Good\", \"Fair\", \"Poor\"))) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 12686 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (14): glasses, eyesight, sleep_wkdy, sleep_wknd, id, nsibs, samp, race_e...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n# Exercises 1\n\nMake a `tbl_summary()`. Include (at least) number of hours of sleep on weekdays and weekends, categorical region, and income and make sure they are nicely labeled. Play around with the extra functions from the example in the slides.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"gtsummary\")\nlibrary(gtsummary)\ntbl_summary(nlsy, \n            by = sex_cat,\n            include = c(contains(\"sleep\"), income, region_cat, sex_cat),\n            label = list(sleep_wkdy ~ \"Weekday sleep (hrs)\",\n                         sleep_wknd ~ \"Weekend sleep (hrs)\",\n                         region_cat ~ \"Region\",\n                         income ~ \"Income ($)\"),\n                            # change all continuous variables to mean, sd\n            statistic = list(all_continuous() ~ \"{mean} ({sd})\",\n                             # change income to specific statistic\n                             income ~ \"10th pctle: ${p10}; 90th pctle: ${p90}\",\n                             all_categorical() ~ \"{n} ({p}%)\"),\n            # remove missingness\n            missing = \"no\",\n            # change to row percentages\n            percent = \"row\") |> \n  # add p-value\n  add_p()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"zsmchvpqcf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zsmchvpqcf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zsmchvpqcf thead, #zsmchvpqcf tbody, #zsmchvpqcf tfoot, #zsmchvpqcf tr, #zsmchvpqcf td, #zsmchvpqcf th {\n  border-style: none;\n}\n\n#zsmchvpqcf p {\n  margin: 0;\n  padding: 0;\n}\n\n#zsmchvpqcf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zsmchvpqcf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zsmchvpqcf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zsmchvpqcf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zsmchvpqcf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zsmchvpqcf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zsmchvpqcf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zsmchvpqcf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zsmchvpqcf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zsmchvpqcf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zsmchvpqcf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zsmchvpqcf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zsmchvpqcf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zsmchvpqcf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zsmchvpqcf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zsmchvpqcf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zsmchvpqcf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zsmchvpqcf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zsmchvpqcf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zsmchvpqcf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zsmchvpqcf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zsmchvpqcf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zsmchvpqcf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zsmchvpqcf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zsmchvpqcf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zsmchvpqcf .gt_left {\n  text-align: left;\n}\n\n#zsmchvpqcf .gt_center {\n  text-align: center;\n}\n\n#zsmchvpqcf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zsmchvpqcf .gt_font_normal {\n  font-weight: normal;\n}\n\n#zsmchvpqcf .gt_font_bold {\n  font-weight: bold;\n}\n\n#zsmchvpqcf .gt_font_italic {\n  font-style: italic;\n}\n\n#zsmchvpqcf .gt_super {\n  font-size: 65%;\n}\n\n#zsmchvpqcf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zsmchvpqcf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zsmchvpqcf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zsmchvpqcf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zsmchvpqcf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zsmchvpqcf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zsmchvpqcf .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Male&lt;/strong&gt;, N = 6,403&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>Male</strong>, N = 6,403<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Female&lt;/strong&gt;, N = 6,283&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>Female</strong>, N = 6,283<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;\"><strong>p-value</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>2</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Weekday sleep (hrs)</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">6.53 (1.41)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">6.60 (1.46)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.046</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Weekend sleep (hrs)</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">7.14 (1.65)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">7.19 (1.69)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.094</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Income ($)</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">10th pctle: $3,864; 90th pctle: $30,000</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">10th pctle: $3,068; 90th pctle: $30,000</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.082</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Region</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.11</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Northeast</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">1,296 (51%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">1,254 (49%)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    North Central</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">1,488 (51%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">1,446 (49%)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    South</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">2,251 (49%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">2,317 (51%)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    West</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">1,253 (52%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">1,142 (48%)</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> Mean (SD); 10th pctle: $10%; 90th pctle: $90%; n (%)</td>\n    </tr>\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>2</sup></span> Wilcoxon rank sum test; Pearson’s Chi-squared test</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\n\n# Exercises 2\n\nFit a Poisson regression for the number of siblings, using at least 3 predictors of your choice. Calculate the exponentiated coefficients and confidence intervals.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoisson_model <- glm(nsibs ~ income + I(income^2) + region_cat*age_bir,\n                     family = poisson(), data = nlsy)\n\nexp(coef(poisson_model))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                    (Intercept)                          income \n                      7.4213002                       0.9999755 \n                    I(income^2)         region_catNorth Central \n                      1.0000000                       1.0784901 \n                region_catSouth                  region_catWest \n                      1.0104004                       1.0379966 \n                        age_bir region_catNorth Central:age_bir \n                      0.9827437                       0.9994832 \n        region_catSouth:age_bir          region_catWest:age_bir \n                      1.0030114                       1.0003742 \n```\n:::\n\n```{.r .cell-code}\nexp(confint(poisson_model))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWaiting for profiling to be done...\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n                                    2.5 %    97.5 %\n(Intercept)                     6.3893753 8.6183813\nincome                          0.9999725 0.9999785\nI(income^2)                     1.0000000 1.0000000\nregion_catNorth Central         0.8894301 1.3078070\nregion_catSouth                 0.8475765 1.2046645\nregion_catWest                  0.8479656 1.2709126\nage_bir                         0.9768932 0.9885837\nregion_catNorth Central:age_bir 0.9918233 1.0072149\nregion_catSouth:age_bir         0.9959424 1.0101534\nregion_catWest:age_bir          0.9922888 1.0085201\n```\n:::\n\n```{.r .cell-code}\n# OR can pipe those nested functions\npoisson_model |> coef() |> exp()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                    (Intercept)                          income \n                      7.4213002                       0.9999755 \n                    I(income^2)         region_catNorth Central \n                      1.0000000                       1.0784901 \n                region_catSouth                  region_catWest \n                      1.0104004                       1.0379966 \n                        age_bir region_catNorth Central:age_bir \n                      0.9827437                       0.9994832 \n        region_catSouth:age_bir          region_catWest:age_bir \n                      1.0030114                       1.0003742 \n```\n:::\n\n```{.r .cell-code}\npoisson_model |> confint() |> exp()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWaiting for profiling to be done...\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n                                    2.5 %    97.5 %\n(Intercept)                     6.3893753 8.6183813\nincome                          0.9999725 0.9999785\nI(income^2)                     1.0000000 1.0000000\nregion_catNorth Central         0.8894301 1.3078070\nregion_catSouth                 0.8475765 1.2046645\nregion_catWest                  0.8479656 1.2709126\nage_bir                         0.9768932 0.9885837\nregion_catNorth Central:age_bir 0.9918233 1.0072149\nregion_catSouth:age_bir         0.9959424 1.0101534\nregion_catWest:age_bir          0.9922888 1.0085201\n```\n:::\n\n```{.r .cell-code}\n# cannot exponentiate the summary function\nsummary(poisson_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nglm(formula = nsibs ~ income + I(income^2) + region_cat * age_bir, \n    family = poisson(), data = nlsy)\n\nCoefficients:\n                                  Estimate Std. Error z value Pr(>|z|)    \n(Intercept)                      2.004e+00  7.634e-02  26.255  < 2e-16 ***\nincome                          -2.450e-05  1.526e-06 -16.057  < 2e-16 ***\nI(income^2)                      2.905e-10  2.599e-11  11.176  < 2e-16 ***\nregion_catNorth Central          7.556e-02  9.835e-02   0.768    0.442    \nregion_catSouth                  1.035e-02  8.969e-02   0.115    0.908    \nregion_catWest                   3.729e-02  1.032e-01   0.361    0.718    \nage_bir                         -1.741e-02  3.035e-03  -5.736 9.69e-09 ***\nregion_catNorth Central:age_bir -5.169e-04  3.928e-03  -0.132    0.895    \nregion_catSouth:age_bir          3.007e-03  3.614e-03   0.832    0.405    \nregion_catWest:age_bir           3.742e-04  4.139e-03   0.090    0.928    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for poisson family taken to be 1)\n\n    Null deviance: 8022.1  on 4695  degrees of freedom\nResidual deviance: 7308.8  on 4686  degrees of freedom\n  (7990 observations deleted due to missingness)\nAIC: 21509\n\nNumber of Fisher Scoring iterations: 5\n```\n:::\n:::\n\n\n# Exercises 3\n\nCreate a nice table displaying your Poisson regression.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(broom)\ntidy(poisson_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 5\n   term                             estimate std.error statistic   p.value\n   <chr>                               <dbl>     <dbl>     <dbl>     <dbl>\n 1 (Intercept)                      2.00e+ 0  7.63e- 2   26.3    6.26e-152\n 2 income                          -2.45e- 5  1.53e- 6  -16.1    5.08e- 58\n 3 I(income^2)                      2.90e-10  2.60e-11   11.2    5.37e- 29\n 4 region_catNorth Central          7.56e- 2  9.83e- 2    0.768  4.42e-  1\n 5 region_catSouth                  1.03e- 2  8.97e- 2    0.115  9.08e-  1\n 6 region_catWest                   3.73e- 2  1.03e- 1    0.361  7.18e-  1\n 7 age_bir                         -1.74e- 2  3.03e- 3   -5.74   9.69e-  9\n 8 region_catNorth Central:age_bir -5.17e- 4  3.93e- 3   -0.132  8.95e-  1\n 9 region_catSouth:age_bir          3.01e- 3  3.61e- 3    0.832  4.05e-  1\n10 region_catWest:age_bir           3.74e- 4  4.14e- 3    0.0904 9.28e-  1\n```\n:::\n\n```{.r .cell-code}\ntbl_regression(poisson_model,\n               exponentiate = TRUE,\n               label = list(income ~ \"Income\",\n                            `I(income^2)` ~ \"Income^2\",\n                            region_cat ~ \"Region\",\n                            age_bir ~ \"Age at first birth\",\n                            `region_cat:age_bir` ~ \"Region/age interaction\")) |> \n  bold_labels()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"hymonqvpas\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hymonqvpas table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hymonqvpas thead, #hymonqvpas tbody, #hymonqvpas tfoot, #hymonqvpas tr, #hymonqvpas td, #hymonqvpas th {\n  border-style: none;\n}\n\n#hymonqvpas p {\n  margin: 0;\n  padding: 0;\n}\n\n#hymonqvpas .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hymonqvpas .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hymonqvpas .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hymonqvpas .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hymonqvpas .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hymonqvpas .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hymonqvpas .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hymonqvpas .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hymonqvpas .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hymonqvpas .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hymonqvpas .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hymonqvpas .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hymonqvpas .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hymonqvpas .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hymonqvpas .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hymonqvpas .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hymonqvpas .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hymonqvpas .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hymonqvpas .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hymonqvpas .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hymonqvpas .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hymonqvpas .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hymonqvpas .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hymonqvpas .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hymonqvpas .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hymonqvpas .gt_left {\n  text-align: left;\n}\n\n#hymonqvpas .gt_center {\n  text-align: center;\n}\n\n#hymonqvpas .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hymonqvpas .gt_font_normal {\n  font-weight: normal;\n}\n\n#hymonqvpas .gt_font_bold {\n  font-weight: bold;\n}\n\n#hymonqvpas .gt_font_italic {\n  font-style: italic;\n}\n\n#hymonqvpas .gt_super {\n  font-size: 65%;\n}\n\n#hymonqvpas .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hymonqvpas .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hymonqvpas .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hymonqvpas .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hymonqvpas .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hymonqvpas .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hymonqvpas .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;IRR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>IRR</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>95% CI</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;\"><strong>p-value</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">Income</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">1.00, 1.00</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">Income^2</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">1.00, 1.00</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">Region</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Northeast</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    North Central</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.08</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.89, 1.31</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.4</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    South</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.01</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.85, 1.20</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">>0.9</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    West</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.04</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.85, 1.27</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.7</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">Age at first birth</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.98, 0.99</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">Region/age interaction</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    North Central * Age at first birth</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.99, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.9</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    South * Age at first birth</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">1.00, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.4</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    West * Age at first birth</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.99, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">>0.9</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> IRR = Incidence Rate Ratio, CI = Confidence Interval</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\nThe `{broom}` package has a couple of other major functions: `glance()` and `augment()`. Try out each of them on your regression model. Look at the documentation for each to help you figure out what they do.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# this will output some model statistics\nglance(poisson_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 8\n  null.deviance df.null  logLik    AIC    BIC deviance df.residual  nobs\n          <dbl>   <int>   <dbl>  <dbl>  <dbl>    <dbl>       <int> <int>\n1         8022.    4695 -10744. 21509. 21573.    7309.        4686  4696\n```\n:::\n\n```{.r .cell-code}\n# this will add fitted/predicted values, residuals, and some other\n# stats to the original dataframe\naugment(poisson_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4,696 × 12\n   .rownames nsibs income `I(income^2)` region_cat age_bir .fitted .resid\n   <chr>     <dbl>  <dbl>      <I<dbl>> <fct>        <dbl>   <dbl>  <dbl>\n 1 2             8  20000     400000000 Northeast       34   1.04   2.51 \n 2 3             3  22390     501312100 Northeast       19   1.27  -0.307\n 3 6             1  35000    1225000000 Northeast       30   0.980 -1.17 \n 4 8             7   7227      52229529 Northeast       17   1.55   0.991\n 5 9             4  17000     289000000 Northeast       27   1.20   0.358\n 6 15            1  22000     484000000 Northeast       33   1.03  -1.24 \n 7 16            3  48000    2304000000 Northeast       31   0.958  0.238\n 8 18            2   4510      20340100 South           19   1.64  -1.58 \n 9 20            2  50000    2500000000 Northeast       30   0.983 -0.431\n10 26            2  30000     900000000 Northeast       33   0.956 -0.389\n# ℹ 4,686 more rows\n# ℹ 4 more variables: .hat <dbl>, .sigma <dbl>, .cooksd <dbl>, .std.resid <dbl>\n```\n:::\n:::\n\n\n# Exercises 4\n\nCreate a scatterplot for `nsibs` on the y-axis and `income` on the x-axis. Add a regression line from a Poisson regression to it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = nlsy, \n       aes(x = income, \n           y = nsibs, \n           color = region_cat)) + # stratify by region\n  geom_point() +\n  geom_smooth(method = \"glm\",\n              method.args = list(family = poisson()))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 2505 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 2505 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output-display}\n![](exercises_day_4_inclass_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "exercises_day_4_inclass_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}